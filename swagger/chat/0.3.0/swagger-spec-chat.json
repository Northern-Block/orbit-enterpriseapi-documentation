{"openapi":"3.0.0","paths":{"/chat/lob/{lob_id}/contact/{contact_id}/send":{"post":{"operationId":"ChatController_sendMessage","summary":"Send a message","parameters":[{"name":"lob_id","required":true,"in":"path","schema":{"type":"string"}},{"name":"contact_id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatDto"}}}},"responses":{"201":{"description":"Api successfully sent chat","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendChatResponse"}}}},"400":{"description":"A required parameter was missing in the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequestResponse"}}}},"401":{"description":"Invalid API Key included in the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"URL cannot be found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundErrorResponse"}}}},"500":{"description":"The server encountered an unexpected condition that prevented it from fulfilling the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InternalServerErrorResponse"}}}}},"tags":["chat"],"security":[{"api-key":[]}]}},"/chat/lob/{lob_id}":{"get":{"operationId":"ChatController_getAllMessages","summary":"Get all messages","parameters":[{"name":"lob_id","required":true,"in":"path","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","schema":{"type":"number"}},{"name":"items_per_page","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"201":{"description":"Retrieve all chat","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetAllChatResponse"}}}},"400":{"description":"A required parameter was missing in the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequestResponse"}}}},"401":{"description":"Invalid API Key included in the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"URL cannot be found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundErrorResponse"}}}},"500":{"description":"The server encountered an unexpected condition that prevented it from fulfilling the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InternalServerErrorResponse"}}}}},"tags":["chat"],"security":[{"api-key":[]}]}},"/chat/lob/{lob_id}/contact/{contact_id}":{"get":{"operationId":"ChatController_getMessagesByContact","summary":"Get all messages for a contact","parameters":[{"name":"lob_id","required":true,"in":"path","schema":{"type":"string"}},{"name":"contact_id","required":true,"in":"path","schema":{"type":"string"}},{"name":"state","required":false,"in":"query","schema":{"enum":["sent","received"],"type":"string"}},{"name":"page","required":false,"in":"query","schema":{"type":"number"}},{"name":"items_per_page","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"201":{"description":"Api succesfully sent chat","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetChatResponseDTO"}}}},"400":{"description":"A required parameter was missing in the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequestResponse"}}}},"401":{"description":"Invalid API Key included in the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"URL cannot be found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundErrorResponse"}}}},"500":{"description":"The server encountered an unexpected condition that prevented it from fulfilling the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InternalServerErrorResponse"}}}}},"tags":["chat","chat"],"security":[{"api-key":[]}]}},"/chat/lob/{lob_id}/contact/{contact_id}/read":{"patch":{"operationId":"ChatController_markAsRead","summary":"Mark a message as read","parameters":[{"name":"lob_id","required":true,"in":"path","schema":{"type":"string"}},{"name":"contact_id","required":true,"in":"path","schema":{"type":"string"}},{"name":"message_id","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"201":{"description":"Api succesfully updated chat","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateChatDto"}}}},"400":{"description":"A required parameter was missing in the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequestResponse"}}}},"401":{"description":"Invalid API Key included in the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnauthorizedResponse"}}}},"404":{"description":"URL cannot be found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundErrorResponse"}}}},"500":{"description":"The server encountered an unexpected condition that prevented it from fulfilling the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InternalServerErrorResponse"}}}}},"tags":["chat","chat"],"security":[{"api-key":[]}]}},"/health":{"get":{"operationId":"HealthController_selfCheck","summary":"this api check application running health","parameters":[],"responses":{"200":{"description":"The Health Check is successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"ok"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","properties":{"status":{"type":"string"}},"additionalProperties":{"type":"string"}},"nullable":true},"error":{"type":"object","example":{},"additionalProperties":{"type":"object","properties":{"status":{"type":"string"}},"additionalProperties":{"type":"string"}},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","properties":{"status":{"type":"string"}},"additionalProperties":{"type":"string"}}}}}}}},"503":{"description":"The Health Check is not successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"error"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","properties":{"status":{"type":"string"}},"additionalProperties":{"type":"string"}},"nullable":true},"error":{"type":"object","example":{"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","properties":{"status":{"type":"string"}},"additionalProperties":{"type":"string"}},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"},"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","properties":{"status":{"type":"string"}},"additionalProperties":{"type":"string"}}}}}}}}},"tags":["health"]}}},"info":{"title":"Orbit Enterprise Chat","description":"APIs for sending and receiving secure messages via DIDComm","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"api-key":{"type":"apiKey","in":"header","name":"api-key"}},"schemas":{"BadRequestResponse":{"type":"object","properties":{"message":{"type":"string","example":"A required parameter was missing in the request"},"error":{"type":"string","example":"Bad Request"},"statusCode":{"type":"number","example":400}},"required":["message","error","statusCode"]},"UnauthorizedResponse":{"type":"object","properties":{"message":{"type":"string","example":"Invalid API Key included in the request"},"error":{"type":"string","example":"UnauthorizedException"},"statusCode":{"type":"number","example":401}},"required":["message","error","statusCode"]},"NotFoundErrorResponse":{"type":"object","properties":{"message":{"type":"string","example":"URL cannot be found"},"error":{"type":"string","example":"Not Found"},"statusCode":{"type":"number","example":404}},"required":["message","error","statusCode"]},"InternalServerErrorResponse":{"type":"object","properties":{"message":{"type":"string","example":"The server encountered an unexpected condition that prevented it from fulfilling the request"},"error":{"type":"string","example":"InternalServerErrorException"},"statusCode":{"type":"number","example":500}},"required":["message","error","statusCode"]},"ChatDto":{"type":"object","properties":{"content":{"type":"string","example":"Hello","description":"message body"}},"required":["content"]},"SendResponse":{"type":"object","properties":{"message":{"type":"string","example":"Hello","description":"The message content that is being sent"},"isRead":{"type":"boolean","example":false,"description":"Represents read status of the message"},"contactId":{"type":"string","example":"e4973c8e-c3fd-4260-85f4-80f558fb4f03","description":"Represents the unique connection between agents"},"chatId":{"type":"number","example":"1","description":"Unique id for message"}},"required":["message","isRead","contactId","chatId"]},"SendChatResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true,"description":"Should be “true” in the response body for series 200 response"},"data":{"$ref":"#/components/schemas/SendResponse"}},"required":["success","data"]},"Message":{"type":"object","properties":{"id":{"type":"number","example":1,"description":"Unique Identifier for message"},"message":{"type":"string","example":"hello","description":"The content of the message"},"state":{"type":"string","example":"sent","description":"Represent message state sent or recieved "},"isRead":{"type":"boolean","example":true,"description":"Represents reading state of the message"},"createdAt":{"format":"date-time","type":"string","example":"2025-04-02T11:32:12.290Z","description":"Date at which message was sent"},"updatedAt":{"format":"date-time","type":"string","example":"2025-04-02T11:32:12.290Z","description":"Date at which message was updated"}},"required":["id","message","state","isRead","createdAt","updatedAt"]},"AllChatItems":{"type":"object","properties":{"messages":{"type":"array","items":{"$ref":"#/components/schemas/Message"}},"contact":{"type":"string","example":"73ed5154-f595-4bc6-ac32-4371c1bfd7f9","description":"Unique Identifier for message"}},"required":["messages","contact"]},"PaginationMeta":{"type":"object","properties":{"totalItems":{"type":"number","example":100,"description":"The total number of items available."},"itemCount":{"type":"number","example":10,"description":"The number of items returned in the current response."},"itemsPerPage":{"type":"number","example":10,"description":"The number of items per page in the pagination."},"totalPages":{"type":"number","example":10,"description":"The total number of pages available based on the total items."},"currentPage":{"type":"number","example":1,"description":"The current page number being viewed."}},"required":["totalItems","itemCount","itemsPerPage","totalPages","currentPage"]},"GetAllChat":{"type":"object","properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/AllChatItems"}},"meta":{"description":"The meta data corresponding to records returned by a GET method.","allOf":[{"$ref":"#/components/schemas/PaginationMeta"}]}},"required":["items","meta"]},"GetAllChatResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true,"description":"Should be “true” in the response body for series 200 response"},"message":{"type":"string","example":"messages fetched succesfully"},"data":{"$ref":"#/components/schemas/GetAllChat"}},"required":["success","message","data"]},"Chat":{"type":"object","properties":{"id":{"type":"number","example":1,"description":"Unique Identifier for message"},"contact":{"type":"string","example":"73ed5154-f595-4bc6-ac32-4371c1bfd7f9","description":"Unique Identifier for message"},"message":{"type":"string","example":"hello","description":"The content of the message"},"state":{"type":"string","example":"sent","description":"Represent message state sent or recieved "},"isRead":{"type":"boolean","example":true,"description":"Represents reading state of the message"},"createdAt":{"format":"date-time","type":"string","example":"2025-04-02T11:32:12.290Z","description":"Date at which message was sent"},"updatedAt":{"format":"date-time","type":"string","example":"2025-04-02T11:32:12.290Z","description":"Date at which message was updated"}},"required":["id","message","state","isRead","createdAt","updatedAt"]},"GetResponseData":{"type":"object","properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/Chat"}},"meta":{"description":"The meta data corresponding to records returned by a GET method.","allOf":[{"$ref":"#/components/schemas/PaginationMeta"}]}},"required":["items","meta"]},"GetChatResponseDTO":{"type":"object","properties":{"success":{"type":"boolean","example":true,"description":"Should be “true” in the response body for series 200 response"},"message":{"type":"string","example":"messages fetched succesfully"},"data":{"$ref":"#/components/schemas/GetResponseData"}},"required":["success","message","data"]},"UpdateChat":{"type":"object","properties":{"isRead":{"type":"boolean","example":true,"description":"Message Read status"},"contactId":{"type":"string","example":"e4973c8e-c3fd-4260-85f4-80f558fb4f03","description":"Represents the unique connection between agents"},"messageId":{"type":"number","example":2,"description":"Unique Identifier for message"}},"required":["isRead","contactId","messageId"]},"UpdateChatDto":{"type":"object","properties":{"success":{"type":"boolean","example":true,"description":"Should be “true” in the response body for series 200 response"},"message":{"type":"string","example":"message status updated succesfully"},"data":{"$ref":"#/components/schemas/UpdateChat"}},"required":["success","message","data"]}}}}